export type LocaleKey = 'de' | 'en';

export const SUPPORTED_LOCALES: readonly LocaleKey[] = ['de', 'en'];
export const DEFAULT_LOCALE: LocaleKey = 'de';

const translations: Record<LocaleKey, Record<string, string>> = {
  de: {
    'app.title': 'CannaClicker',
    'stats.buds': 'Buds',
    'stats.bpc': 'Buds pro Klick',
    'stats.bps': 'Buds pro Sekunde',
    'stats.total': 'Gesamt geerntet',
    'stats.seeds': 'Seeds',
    'stats.seedRate': 'Seeds pro Stunde',
    'stats.seedRate.metaPassive': 'Idle {progress}% â€“ {chance}% alle {minutes} Min. ({seeds}ðŸŒ±)',
    'stats.seedRate.metaNoPassive': 'Keine passive Seed-Ernte aktiv',
    'stats.seedRate.throttled': 'Gedrosselt bei {cap}/h',
    'stats.prestigeMult': 'Prestige-Multiplikator',
    'actions.click': 'Ernte Buds',
    'actions.buy': 'Kaufen',
    'actions.max': 'Max',
    'actions.export': 'Export',
    'actions.import': 'Import',
    'actions.reset': 'Reset',
    'actions.close': 'SchlieÃŸen',
    'actions.mute': 'Stumm',
    'actions.unmute': 'Ton',
    'actions.prestige': 'Prestige',
    'actions.confirm': 'BestÃ¤tigen',
    'actions.cancel': 'Abbrechen',
    'modal.import.title': 'Spielstand importieren',
    'modal.import.hint': 'FÃ¼ge hier deinen Base64-Export ein.',
    'modal.reset.title': 'Fortschritt zurÃ¼cksetzen?',
    'modal.reset.body': 'Das lÃ¶scht deinen aktuellen Fortschritt unwiderruflich.',
    'modal.reset.confirm': 'Ja, lÃ¶schen',
    'panel.tabs.shop': 'Anbau',
    'panel.tabs.upgrades': 'Upgrades',
    'panel.tabs.research': 'Forschung',
    'panel.tabs.prestige': 'Prestige',
    'panel.tabs.achievements': 'Erfolge',
    'panel.prestige.description':
      'Prestige setzt Buds, GebÃ¤ude und Upgrades zurÃ¼ck. Meilensteine bleiben aktiv und verleihen dauerhafte Boni sowie einen Kickstart.',
    'panel.prestige.permanent': 'Dauerhafte Boni',
    'panel.prestige.kickstartNext': 'Reset-Kickstart',
    'panel.prestige.kickstartActive': 'Aktiver Kickstart',
    'panel.prestige.progress': 'Fortschritt: {current} / {target} Lifetime-Buds',
    'panel.prestige.requirement': 'BenÃ¶tigt {value} Lifetime-Buds',
    'panel.prestige.tooSoon': 'Noch keine zusÃ¤tzlichen Seeds verfÃ¼gbar.',
    'panel.prestige.ready': 'Bereit fÃ¼r Prestige!',
    'shop.title': 'Anbau',
    'shop.empty': 'Noch keine Gebaeude verfuegbar. Ernte mehr Buds!',
    'shop.cost': 'Kosten',
    'shop.owned': 'Besitzt',
    'shop.roiValue': 'ROI {seconds}s',
    'shop.roiInfinite': 'ROI âˆž',
    'shop.stageLabel': 'Stufe {level}',
    'shop.stageProgress': 'noch {remaining} bis Stufe {next}',
    'shop.stageTooltip': 'Stufenbonus Ã—{bonus} je {count} KÃ¤ufe',
    'shop.softcapBadge': 'â†“SC Ã—{stacks}',
    'shop.softcapTooltipNext': 'Basisproduktion -{percent}%. NÃ¤chste Reduktion bei {next}.',
    'shop.softcapTooltipMax': 'Basisproduktion -{percent}%. Keine weiteren Reduktionen.',
    'upgrades.title': 'Upgrades',
    'upgrades.cost': 'Kosten',
    'upgrades.action.buy': 'Upgrade',
    'upgrades.status.owned': 'Gekauft',
    'upgrades.status.ready': 'Freigeschaltet',
    'upgrades.status.affordable': 'Kaufbereit',
    'upgrades.status.locked': 'Gesperrt',
    'upgrades.progress.active': 'Aktiv',
    'upgrades.lock.items': 'Noch {remaining}Ã— {name}',
    'upgrades.lock.total': 'Noch {amount} Lifetime-Buds',
    'upgrades.lock.upgrade': 'Vorheriges Upgrade erforderlich: {name}',
    'upgrades.requirement.items': '{current}/{required}Ã— {name}',
    'upgrades.requirement.total': 'Lifetime-Buds {current} / {required}',
    'upgrades.requirement.upgrade': 'BenÃ¶tigt Upgrade: {name}',
    'upgrades.category.building': 'GebÃ¤ude',
    'upgrades.category.synergy': 'Synergie',
    'upgrades.category.utility': 'Support',
    'upgrades.toast.title': 'Upgrade',
    'upgrades.toast.message': '{name} verbessert!',
    'upgrades.fx.spark': 'Upgrade!',
    'achievements.title': 'Erfolge',
    'achievements.reward': 'Bonus +{value}%',
    'achievements.status.locked': 'Nicht erreicht',
    'achievements.status.unlocked': 'Freigeschaltet',
    'milestones.active': 'Aktiv',
    'milestones.progress.unique': 'GebÃ¤ude-Typen: {current}/{target}',
    'milestones.progress.atLeast': 'GebÃ¤ude â‰¥{amount}: {current}/{target}',
    'milestones.progress.any': 'Beste Stufe: {current}/{target}',
    'milestones.progress.unlocked': 'Freigeschaltet {unlocked}/{total} Â· Beste Stufe {current}/{target}',
    'abilities.title': 'Aktive Faehigkeiten',
    'abilities.status.ready': 'Bereit',
    'abilities.status.active': 'Aktiv ({seconds}s)',
    'abilities.status.cooldown': 'Abklingzeit ({seconds}s)',
    'abilities.overdrive.name': 'Overdrive',
    'abilities.overdrive.desc': 'Produktion x{multiplier} fuer {duration} s. Abklingzeit {cooldown} s.',
    'abilities.burst.name': 'Burst Click',
    'abilities.burst.desc': 'Klickwert x{multiplier} fuer {duration} s. Abklingzeit {cooldown} s.',
    'research.title': 'Forschung',
    'research.filter.all': 'Alle',
    'research.filter.available': 'Verfuegbar',
    'research.filter.owned': 'Gekauft',
    'research.path.efficiency': 'Pfad A Â· Effizienz',
    'research.path.control': 'Pfad B Â· Kontrolle',
    'research.path.strain': 'Pfad C Â· Strains',
    'research.cost.buds': 'Kosten (Buds)',
    'research.cost.seeds': 'Kosten (Seeds)',
    'research.requires': 'Benoetigt: {list}',
    'research.button.buy': 'Erforschen',
    'research.button.owned': 'Abgeschlossen',
    'research.button.locked': 'Gesperrt',
    'research.empty': 'Keine Forschung verfuegbar.',
    'research.effect.bps': 'BPS x{value}',
    'research.effect.bpc': 'BPC x{value}',
    'research.effect.cost': 'Kosten -{value}%',
    'research.effect.autoclick': 'Auto-Klick +{value}/s',
    'research.effect.overdrive': 'Overdrive +{value}%',
    'research.effect.offline': 'Offline-Cap +{value}h',
    'research.effect.abilityDuration': 'Skill-Dauer +{value}%',
    'research.effect.hydroIrrigation': 'Hydro & Bewaesserung x{value}',
    'research.effect.hybridBuff': '+{percent}% je aktivem Buff',
    'research.effect.strain.indica': 'Spezialisierung: Indica',
    'research.effect.strain.sativa': 'Spezialisierung: Sativa',
    'research.effect.strain.hybrid': 'Spezialisierung: Hybrid',
    'research.effect.seedClick': 'Seed-Chance +{value} Prozentpunkte',
    'research.effect.seedPassive': 'Idle {minutes} min â†’ {chance}% Chance auf {seeds} Seed(s)',
    'research.confirm.strain': 'Diese Strain-Wahl gilt bis zum naechsten Prestige. Jetzt aktivieren?',
    'research.lock.exclusive': 'Andere Spezialisierung bereits aktiv. Wechsel erst nach Prestige.',
    'research.lock.totalBuds': 'Erfordert Gesamtbuds â‰¥ {value}',
    'research.lock.prestigeSeeds': 'Erfordert Seeds â‰¥ {value} (aktuell {current})',
    'research.lock.all': 'Benoetigt: {list}',
    'research.lock.any': 'Erfuellt eine der folgenden Bedingungen: {list}',
    'prestige.summary.bps': 'BPS +{value}%',
    'prestige.summary.bpc': 'BPC +{value}%',
    'prestige.summary.global': 'Global +{value}%',
    'prestige.summary.none': 'Keine',
    'prestige.kickstart.none': 'Kein Kickstart verfÃ¼gbar',
    'prestige.kickstart.discount': ' Â· -{value}% Kosten',
    'prestige.kickstart.summary': 'Stufe {level}: Ã—{mult} BPS/BPC fÃ¼r {duration}{cost}',
    'prestige.kickstart.inactive': 'Kein Kickstart aktiv',
    'prestige.kickstart.activeSummary': 'Aktiv (Stufe {level}): Ã—{mult} BPS/BPC fÃ¼r noch {remaining}{cost}',
    'prestige.badge.tooltip': 'Prestige bereit â€“ Boni: {bonus}',
    'prestige.modal.title': 'Prestige starten?',
    'prestige.modal.description':
      'Soft-Reset lÃ¶scht Buds, GebÃ¤ude und Upgrades. Seeds und Meilensteine bleiben erhalten.',
    'prestige.modal.warning':
      'Aktiviert einen Kickstart-Buff entsprechend deinen Meilensteinen. Der Buff startet direkt nach dem Prestige.',
    'prestige.modal.permanentBonus': 'Dauerhafte Boni aktiv',
    'prestige.modal.kickstartNext': 'Kickstart nach Prestige',
    'prestige.modal.kickstartActive': 'Aktiver Kickstart',
    'prestige.modal.requirementProgress': 'Prestige-Fortschritt',
    'prestige.modal.requirementProgressValue': '{current} / {target} Lifetime-Buds',
    'prestige.modal.requirementHint': 'BenÃ¶tigt {target} Lifetime-Buds (aktuell {current})',
    'prestige.modal.currentSeeds': 'Aktuelle Seeds',
    'prestige.modal.afterSeeds': 'Seeds nach Prestige',
    'prestige.modal.gainSeeds': 'Seeds heute',
    'prestige.modal.globalBonus': 'Neuer Global-Bonus',
    'prestige.modal.requirement': 'Benoetigt {value} Lifetime-Buds',
    'prestige.modal.tooSoon': 'Zu wenige Buds fuer neue Seeds',
    'prestige.modal.checkbox': 'Ich verstehe den Soft-Reset',
    'prestige.modal.confirm': 'Prestige ausloesen',
    'prestige.control.locked': 'Prestige ab {requirement} Lifetime-Buds',
    'toast.offline.title': 'Offline-Ertrag',
    'toast.offline.body': '+{buds} Buds fuer {duration}',
    'events.goldenBud.name': 'Goldener Bud',
    'events.goldenBud.title': 'Golden Bud',
    'events.goldenBud.body': 'Sofort +{buds} Buds eingesackt!',
    'events.seedPack.name': 'Seed Pack',
    'events.seedPack.title': 'Seed Pack',
    'events.seedPack.body': '+{seeds} Seeds eingesammelt!',
    'events.goldenBud.seedBody': '+{seeds} Seeds vom Goldenen Bud!',
    'events.luckyJoint.seedBody': '+{seeds} Seeds aus dem Lucky Joint!',
    'events.luckyJoint.name': 'Lucky Joint',
    'events.luckyJoint.title': 'Lucky Joint',
    'events.luckyJoint.body': 'Produktion x{multiplier} fÃ¼r {duration}s!',
    'events.luckyJoint.refresh': 'Boost erneuert! Produktion x{multiplier} fÃ¼r {duration}s.',
    'toggle.on': 'AN',
    'toggle.off': 'AUS',
    'seeds.synergy.closed_loop': 'Geschlossener Kreislauf',
    'seeds.synergy.hydro_link': 'Hydro-Link',
    'seeds.synergy.climate_genetics': 'Klima & Genetik',
    'seeds.toast.synergy.title': 'Synergie abgeschlossen',
    'seeds.toast.synergy.body': '{name} brachte +{seeds} Seeds!',
    'seeds.toast.passive.title': 'Laborfund',
    'seeds.toast.passive.body': 'Idle-Ernte lieferte +{seeds} Seeds!',
    'seeds.toast.click.title': 'Seed gefunden!',
    'seeds.toast.click.body': '+{seeds} Seed beim Ernten entdeckt!',
  },
  en: {
    'app.title': 'CannaClicker',
    'stats.buds': 'Buds',
    'stats.bpc': 'Buds per Click',
    'stats.bps': 'Buds per Second',
    'stats.total': 'Total Harvested',
    'stats.seeds': 'Seeds',
    'stats.seedRate': 'Seeds per Hour',
    'stats.seedRate.metaPassive': 'Idle {progress}% â€“ {chance}% every {minutes} min ({seeds}ðŸŒ±)',
    'stats.seedRate.metaNoPassive': 'No passive seed income active',
    'stats.seedRate.throttled': 'Throttled at {cap}/h',
    'stats.prestigeMult': 'Prestige Multiplier',
    'actions.click': 'Harvest Buds',
    'actions.buy': 'Buy',
    'actions.max': 'Max',
    'actions.export': 'Export',
    'actions.import': 'Import',
    'actions.reset': 'Reset',
    'actions.close': 'Close',
    'actions.mute': 'Mute',
    'actions.unmute': 'Sound',
    'actions.prestige': 'Prestige',
    'actions.confirm': 'Confirm',
    'actions.cancel': 'Cancel',
    'modal.import.title': 'Import save',
    'modal.import.hint': 'Paste your Base64 save code here.',
    'modal.reset.title': 'Reset progress?',
    'modal.reset.body': 'This cannot be undone and clears your current game.',
    'modal.reset.confirm': 'Yes, delete it',
    'panel.tabs.shop': 'Grow Ops',
    'panel.tabs.upgrades': 'Upgrades',
    'panel.tabs.research': 'Research',
    'panel.tabs.prestige': 'Prestige',
    'panel.tabs.achievements': 'Achievements',
    'panel.prestige.description':
      'Prestige resets buds, buildings, and upgrades. Milestones stay active and unlock permanent bonuses plus a kickstart buff.',
    'panel.prestige.permanent': 'Permanent bonuses',
    'panel.prestige.kickstartNext': 'Next reset kickstart',
    'panel.prestige.kickstartActive': 'Active kickstart',
    'panel.prestige.progress': 'Progress: {current} / {target} lifetime buds',
    'panel.prestige.requirement': 'Requires {value} lifetime buds',
    'panel.prestige.tooSoon': 'No new seeds available yet.',
    'panel.prestige.ready': 'Ready for prestige!',
    'prestige.summary.bps': 'BPS +{value}%',
    'prestige.summary.bpc': 'BPC +{value}%',
    'prestige.summary.global': 'Global +{value}%',
    'prestige.summary.none': 'None',
    'prestige.kickstart.none': 'No kickstart unlocked',
    'prestige.kickstart.discount': ' Â· -{value}% costs',
    'prestige.kickstart.summary': 'Level {level}: Ã—{mult} BPS/BPC for {duration}{cost}',
    'prestige.kickstart.inactive': 'No kickstart active',
    'prestige.kickstart.activeSummary': 'Active (Lv. {level}): Ã—{mult} BPS/BPC for {remaining}{cost}',
    'prestige.badge.tooltip': 'Prestige ready â€“ bonuses: {bonus}',
    'prestige.modal.title': 'Start prestige?',
    'prestige.modal.description':
      'Soft reset clears buds, buildings, and upgrades. Seeds and milestones remain.',
    'prestige.modal.warning':
      'Triggers a kickstart buff based on your milestones. It starts immediately after prestiging.',
    'prestige.modal.permanentBonus': 'Permanent bonuses active',
    'prestige.modal.kickstartNext': 'Kickstart after prestige',
    'prestige.modal.kickstartActive': 'Active kickstart',
    'prestige.modal.requirementProgress': 'Requirement progress',
    'prestige.modal.requirementProgressValue': '{current} / {target} lifetime buds',
    'prestige.modal.requirementHint': 'Needs {target} lifetime buds (currently {current})',
    'prestige.modal.gainSeeds': 'Seeds Today',
    'prestige.modal.globalBonus': 'New Global Bonus',
    'shop.title': 'Grow Ops',
    'shop.empty': 'No buildings unlocked yet. Harvest more buds!',
    'shop.cost': 'Cost',
    'shop.owned': 'Owned',
    'shop.roiValue': 'ROI {seconds}s',
    'shop.roiInfinite': 'ROI âˆž',
    'shop.stageLabel': 'Stage {level}',
    'shop.stageProgress': '{remaining} until Stage {next}',
    'shop.stageTooltip': 'Tier bonus Ã—{bonus} per {count} purchases',
    'shop.softcapBadge': 'â†“SC Ã—{stacks}',
    'shop.softcapTooltipNext': 'Base production -{percent}%. Next reduction at {next}.',
    'shop.softcapTooltipMax': 'Base production -{percent}%. No further reductions.',
    'upgrades.title': 'Upgrades',
    'upgrades.cost': 'Cost',
    'upgrades.action.buy': 'Upgrade',
    'upgrades.status.owned': 'Purchased',
    'upgrades.status.ready': 'Unlocked',
    'upgrades.status.affordable': 'Ready to buy',
    'upgrades.status.locked': 'Locked',
    'upgrades.progress.active': 'Active',
    'upgrades.lock.items': 'Need {remaining}Ã— {name}',
    'upgrades.lock.total': 'Need {amount} lifetime buds',
    'upgrades.lock.upgrade': 'Requires previous upgrade: {name}',
    'upgrades.requirement.items': '{current}/{required}Ã— {name}',
    'upgrades.requirement.total': 'Lifetime buds {current} / {required}',
    'upgrades.requirement.upgrade': 'Requires upgrade: {name}',
    'upgrades.category.building': 'Building',
    'upgrades.category.synergy': 'Synergy',
    'upgrades.category.utility': 'Utility',
    'upgrades.toast.title': 'Upgrade',
    'upgrades.toast.message': '{name} leveled up!',
    'upgrades.fx.spark': 'Upgrade!',
    'achievements.title': 'Achievements',
    'achievements.reward': 'Bonus +{value}%',
    'achievements.status.locked': 'Locked',
    'achievements.status.unlocked': 'Unlocked',
    'milestones.active': 'Active',
    'milestones.progress.unique': 'Building types: {current}/{target}',
    'milestones.progress.atLeast': 'Buildings â‰¥{amount}: {current}/{target}',
    'milestones.progress.any': 'Highest level: {current}/{target}',
    'milestones.progress.unlocked': 'Unlocked {unlocked}/{total} Â· Highest {current}/{target}',
    'abilities.title': 'Active Abilities',
    'abilities.status.ready': 'Ready',
    'abilities.status.active': 'Active ({seconds}s)',
    'abilities.status.cooldown': 'Cooldown ({seconds}s)',
    'abilities.overdrive.name': 'Overdrive',
    'abilities.overdrive.desc': 'Production x{multiplier} for {duration} s. Cooldown {cooldown} s.',
    'abilities.burst.name': 'Burst Click',
    'abilities.burst.desc': 'Click value x{multiplier} for {duration} s. Cooldown {cooldown} s.',
    'research.title': 'Research',
    'research.filter.all': 'All',
    'research.filter.available': 'Available',
    'research.filter.owned': 'Owned',
    'research.path.efficiency': 'Path A Â· Efficiency',
    'research.path.control': 'Path B Â· Control',
    'research.path.strain': 'Path C Â· Strains',
    'research.cost.buds': 'Cost (Buds)',
    'research.cost.seeds': 'Cost (Seeds)',
    'research.requires': 'Requires: {list}',
    'research.button.buy': 'Research',
    'research.button.owned': 'Completed',
    'research.button.locked': 'Locked',
    'research.empty': 'No research available.',
    'research.effect.bps': 'BPS x{value}',
    'research.effect.bpc': 'BPC x{value}',
    'research.effect.cost': 'Cost -{value}%',
    'research.effect.autoclick': 'Auto-click +{value}/s',
    'research.effect.overdrive': 'Overdrive +{value}%',
    'research.effect.offline': 'Offline cap +{value}h',
    'research.effect.abilityDuration': 'Skill duration +{value}%',
    'research.effect.hydroIrrigation': 'Hydro & Irrigation x{value}',
    'research.effect.hybridBuff': '+{percent}% per active buff',
    'research.effect.seedClick': 'Seed chance +{value} percentage points',
    'research.effect.seedPassive': 'Idle {minutes} min â†’ {chance}% chance for {seeds} seed(s)',
    'research.effect.strain.indica': 'Specialisation: Indica',
    'research.effect.strain.sativa': 'Specialisation: Sativa',
    'research.effect.strain.hybrid': 'Specialisation: Hybrid',
    'research.confirm.strain': 'This strain choice lasts until your next prestige. Activate now?',
    'research.lock.exclusive': 'Another specialisation is active. Reset via prestige to swap.',
    'research.lock.totalBuds': 'Requires total buds â‰¥ {value}',
    'research.lock.prestigeSeeds': 'Requires seeds â‰¥ {value} (current {current})',
    'research.lock.all': 'Requires: {list}',
    'research.lock.any': 'Meet one of the following: {list}',
    'toast.offline.title': 'Offline Earnings',
    'toast.offline.body': '+{buds} buds for {duration}',
    'events.goldenBud.name': 'Golden Bud',
    'events.goldenBud.title': 'Golden Bud',
    'events.goldenBud.body': 'Instantly gained +{buds} buds!',
    'events.seedPack.name': 'Seed Pack',
    'events.seedPack.title': 'Seed Pack',
    'events.seedPack.body': 'Collected +{seeds} seeds!',
    'events.goldenBud.seedBody': '+{seeds} seeds from the Golden Bud!',
    'events.luckyJoint.seedBody': '+{seeds} seeds from the Lucky Joint!',
    'events.luckyJoint.name': 'Lucky Joint',
    'events.luckyJoint.title': 'Lucky Joint',
    'events.luckyJoint.body': 'Production x{multiplier} for {duration}s!',
    'events.luckyJoint.refresh': 'Boost refreshed! Production x{multiplier} for {duration}s.',
    'toggle.off': 'OFF',
    'seeds.synergy.closed_loop': 'Closed Loop',
    'seeds.synergy.hydro_link': 'Hydro Link',
    'seeds.synergy.climate_genetics': 'Climate & Genetics',
    'seeds.toast.synergy.title': 'Synergy complete',
    'seeds.toast.synergy.body': '{name} awarded +{seeds} seeds!',
    'seeds.toast.passive.title': 'Lab find',
    'seeds.toast.passive.body': 'Idle harvest yielded +{seeds} seeds!',
    'seeds.toast.click.title': 'Seed found!',
    'seeds.toast.click.body': 'Harvested +{seeds} seed!',
  },
};

export function t(locale: LocaleKey, key: string, params: Record<string, string | number> = {}): string {
  const source = translations[locale]?.[key] ?? translations[DEFAULT_LOCALE]?.[key] ?? key;
  return Object.entries(params).reduce((acc, [token, value]) => acc.replaceAll(`{${token}}`, String(value)), source);
}

export function resolveLocale(candidate?: string | null): LocaleKey {
  if (!candidate) {
    return DEFAULT_LOCALE;
  }

  const normalized = candidate.toLowerCase().slice(0, 2) as LocaleKey;

  return SUPPORTED_LOCALES.includes(normalized) ? normalized : DEFAULT_LOCALE;
}








